# Java垃圾回收机制

## 判断对象是否可以被垃圾回收的算法

* ### 引用计数算法

  * ### 每个对象实例都有一个引数计算器，当局部变量引用到对象实例的时候，对象实例的引用计数+1；方法结束后栈帧出栈，局部变量消失，对象实例引用计数器01；
  * ### 当实例的引用计数器为0的时候，就表明可以进行垃圾回收
  * ### 优点：执行效率高，执行情况受影响较小
  * ### 缺点:无法检测出循环引用的情况，导致内存的泄漏，例如父对象的局部变量引用子对象，而子对象的局部变量又引用了父对象的引用
* ### 可达性算法

  * ### 通过判断对象的引用链是否可达来决定对象是否可以被回收
  * ### ![](/垃圾/1.png)
  * ### 可以作为GC Root的对象

    * ### 虚拟机栈中引用的对象（栈帧中的本地变量表）
    * ### 方法区中的常量引用的对象（就是在类中用常量引用的对象）
    * ### 方法区中的类静态属性引用的对象
    * ### 本地方法栈中的JNI\(Native\)的引用对象
    * ### 活跃线程引用的对象
  * ### 使用标记-清除进行计算

    * ### 从根部对象进行扫描，对存活的对象进行标记
    * ### 对堆内存从头到尾遍历，回收不可达的对象内存
    * ### ![](/垃圾/2.png)



