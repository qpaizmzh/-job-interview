# 集合HashMap

### ![](/hash/1.png)![](/hash/2.png)HashMap:put方法的逻辑

1. ### 如果HashMap未被初始化过，则初始化
2. ### 对key求Hash值，然后再计算下标
3. ### 如果没有碰撞，直接放入桶中
4. ### 如果碰撞了，以链表的形式链接到后面
5. ### 如果链表长度超过阈值，就把链表转成红黑树
6. ### 如果链表长度低于6，就把红黑树转成表
7. ### 如果节点已经存在就替换旧值
8. ### 如果桶满（容量16×加载因子0.75），就需要resize\(扩容两倍后重排\)

### HashMap:如何减少碰撞

* 扰动函数，促使元素位置分布均匀，减少碰撞几率
* 使用final对象，并采用合适的equals\(\)和hashcode\(\)方法：不可变性使得**能**够缓存不同键的 hashcode，这将提高整个获取对象的速度，使用 String、Integer 这样的 wrapper 类作为键是非常好的选择。



