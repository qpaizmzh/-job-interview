# redis中的缓存问题

## 缓存穿透

* :就是一个请求一直不断找数据库不存在的数据，透过了缓存，直接找数据库，形成巨大的压力
  * 解决办法有两种：
    * 第一种是如果是第一次找到这种不存在的数据的话，添加一个空白的对象，然后进行缓存
    * （了解）另一种是设置一个布隆过滤器，把已经有的数据进行hash计算，在每一次有ID过来的时候，进行ID的hash运算，看看是否全部都有碰撞，只要全部都没有，立马回退
    * 接口需要增加相应的校验，控制次数，防止同一时刻的多次访问数据库

## 缓存击穿

* 就是一个请求在缓存中找不到，但是在数据库中的时候是找的到的情况，但是这个时候的同一个请求特别的多，导致数据库压力特别大
  * 解决办法：
    * 添加同步锁，等待从数据库查找出来之后加入缓存，以供后见面的请求使用
    * 或者设置成永不过期就可以了

缓存雪崩

* 突然缓存大规模失效，导致数据库的压力陡增
  * 一般的解决办法就是设置随机的缓存过期时间，让其不至于在某个时刻大批量的过期



